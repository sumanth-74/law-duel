North Star (never changes)
Teach Â· Reward Â· Rank. Every match serves excellent, topic-tagged MBE questions; players see immediate XP + Subtopic Mastery gains; and wins move an async ladder. No dupes, no desyncs, no lost progress.

Player Experience â€” Non-Negotiables
âœ… 5-question matches, 25s server timer, first answer locks.

âœ… Async duels: same 5 Qs for both; play-at-your-pace; winner = most correct (time tiebreak).

âœ… Weakness targeting: â‰¥ 3/5 from playerâ€™s weakest subtopics; difficulty adapts up/down.

âœ… Instant feedback chips after each Q: +XP Â· Subject/Subtopic Â· Mastery Â±N.

âœ… Results screen: XP bar moved, top 3 subtopic arrows (â†‘/â†“), accuracy, Elo delta.

âœ… Daily Casefile: resets midnight UTC; streak increments on consecutive days.

âœ… Public profiles & leaderboards (Friends/School/Global Weekly); no zero-point users; bots have fun gamertags + unique avatars.

Questions & Content
ðŸŽ¯ Quality: true MBE style; rule-first explanation (<120 words); 4 clean, mutually exclusive choices.

ðŸ·ï¸ Tags: every Q carries Subject + Subtopic + Difficulty (1â€“10) from a canonical taxonomy.

ðŸ”„ Freshness: OpenAI-generated server-side with JSON validation + cache; fallback bank if gen fails.

ðŸš« No duplicates within a match (server-enforced).

Progression & Stats
ðŸ“ˆ Mastery per subtopic (0â€“100) updated at answer time (idempotent by user/duel/question).

â­ XP & Level visible on dashboard + result screen.

ðŸ“Š Stats page always shows Subjects â†’ Subtopics (including zeros); never hidden.

ðŸ”’ Persistence: all progress stored server-side; survives logout/device changes.

Ranking & Community
ðŸ“¶ Elo for PvP/async friend duels (Kâ‰ˆ24); result screen shows +XX (oldâ†’new).

ðŸ† Weekly ladder (ISO week); scopes: Friends / School / Global.

ðŸ‘¤ Public profile (toggle: Public / Friends-only / Private) with Level, Elo, subject bars, top 5 subtopics, recent matches.

System & Reliability
ðŸ§  Server-authoritative scoring/timers; clients never trust themselves.

ðŸ§· Idempotency on answer handling (no double counts on reconnect).

ðŸ§© Taxonomy single source with label normalization/aliases.

ðŸ§­ Observability: audit each answer (user, duel, question, subject, subtopic, correct, ms, ts); logs for gen fallback.

âš¡ Performance: P95 event handling < 150 ms; websocket heartbeats drop ghosts in 5s.

Acceptance Tests (block release until ALL green)
Weakness targeting: Solo serves â‰¥3/5 from a known weak subtopic until mastery rises.

Progress felt: After 3/5 correct, XP bar moves; at least one subtopic shows Mastery â†‘ on result screen and on Stats after reload.

Async parity: Two users play at different times; both get the same 5; Elo + ladder update; each userâ€™s subtopic stats reflect their own answers.

No dupes: 20 matches â†’ 0 repeated questions within any single match.

Resilient gen: Simulated OpenAI failure â†’ match completes via cache/bank; audit shows fallback.

Daily streak: Playing on consecutive UTC days increments; skipping resets to 1; timer targets 00:00:00 UTC.

Public profile: /profile/:username shows Level, Elo, subject bars, top subtopics (unless set Private).

Definition of Done:

Answering a question immediately moves XP + Subtopic Mastery; async wins move Elo + Weekly ladder; quality questions are tagged and deduped; all progress persists.

Guardrails â€” Not Now (keep scope tight)
âŒ Cosmetics store / marketplace

âŒ Guilds/parties/tournaments

âŒ Complex animations or sound packs

âŒ Multi-mode experiments beyond Solo / Async Friend (Live PvP optional later)

30-Day Milestones (truth-or-dare deadlines)
Week 1: Core loop stable; taxonomy; answer-time mastery; feedback chips; no dupes; OpenAI gen + cache + fallback; Stats/Subtopics render.
Week 2: Async duels; Elo; Weekly ladder; public profiles; Daily Casefile + streak.
Week 3: QA burn-down; observability; performance; bot polish (names/avatars); school/friends ladders.
Week 4: Closed beta (20â€“50 users). Ship fixes. Target KPIs below.

First-Beta KPIs (go/no-go targets)
Activation (finish 1 match): â‰¥ 70%

D2 return: â‰¥ 35%

Avg questions/session: â‰¥ 10

Async duel rematch rate: â‰¥ 25%

Bug-free matches (no desync/dupe): 99%+

